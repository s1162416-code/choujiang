<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1-30 æ•°å­—è½¬ç›˜</title>
    <style>
        /* é¡µé¢å¸ƒå±€ */
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f4f4f4;
            margin: 0;
        }

        h2 {
            color: #333;
            margin-bottom: 10px;
        }

        /* è½¬ç›˜å®¹å™¨ */
        .wheel-wrapper {
            position: relative;
            width: 360px; /* è½¬ç›˜å°ºå¯¸ç•¥å¾®åŠ å¤§ä»¥å®¹çº³30ä¸ªæ•°å­— */
            height: 360px;
            margin: 20px 0;
        }

        /* æŒ‡é’ˆ (å›ºå®šä¸åŠ¨) */
        .pointer {
            position: absolute;
            top: -20px; /* å‘ä¸Šçªå‡º */
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 35px solid #ff4757; /* çº¢è‰²é†’ç›®æŒ‡é’ˆ */
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.3));
        }

        /* è½¬ç›˜ä¸»ä½“ */
        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            transition: transform 0.1s linear; 
            border: 8px solid #fff;
            box-shadow: 0 0 15px rgba(0,0,0,0.2);
            box-sizing: border-box;
        }

        /* æ•°å­—æ ·å¼ */
        .number-box {
            position: absolute;
            top: 0;
            left: 50%;
            transform-origin: 50% 180px; /* æ—‹è½¬ä¸­å¿ƒç‚¹ï¼šæ°´å¹³å±…ä¸­ï¼Œå‚ç›´å‘ä¸‹å¯¹åº”åŠå¾„é•¿åº¦(360/2=180) */
            width: 30px; /* é™åˆ¶å®½åº¦ */
            height: 180px; /* é«˜åº¦ç­‰äºåŠå¾„ */
            margin-left: -15px; /* å±…ä¸­æ ¡æ­£ (width/2) */
            text-align: center;
            padding-top: 10px; /* æ•°å­—è·ç¦»è¾¹ç¼˜çš„è·ç¦» */
            color: white;
            font-weight: bold;
            font-size: 14px; /* 30ä¸ªæ•°å­—è¾ƒæŒ¤ï¼Œå­—ä½“ç¨å¾®è°ƒå° */
            text-shadow: 1px 1px 2px rgba(0,0,0,0.6);
            /* å³ä½¿åœ¨æ—‹è½¬æ—¶ï¼Œæ–‡å­—ä¹Ÿä¿æŒè‰¯å¥½çš„æ¸²æŸ“ */
            -webkit-font-smoothing: antialiased; 
        }

        /* æ§åˆ¶åŒº */
        .controls {
            margin-top: 20px;
            display: flex;
            gap: 20px;
        }

        button {
            padding: 12px 35px;
            font-size: 18px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            color: white;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }

        button:active {
            transform: scale(0.95);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        #startBtn { background-color: #2ecc71; }
        #startBtn:disabled { background-color: #a5d6a7; cursor: not-allowed; }

        #stopBtn { background-color: #e74c3c; }
        #stopBtn:disabled { background-color: #fadbd8; cursor: not-allowed; }

        /* ç»“æœå±•ç¤º */
        #result {
            margin-top: 20px;
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
            height: 30px;
        }
    </style>
</head>
<body>

    <h2>1-30 å¹¸è¿æ•°å­—è½¬ç›˜</h2>

    <div class="wheel-wrapper">
        <div class="pointer"></div>
        <div class="wheel" id="wheel">
            </div>
    </div>

    <div class="controls">
        <button id="startBtn">å¼€å§‹</button>
        <button id="stopBtn" disabled>åœæ­¢</button>
    </div>

    <div id="result">ç­‰å¾…å¼€å§‹...</div>

    <script>
        // é…ç½®å‚æ•°
        const totalNumbers = 30;
        const radius = 180; // ä¸CSSä¸­çš„é«˜åº¦ä¸€è‡´
        const wheel = document.getElementById('wheel');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const resultDiv = document.getElementById('result');

        // === 1. åˆå§‹åŒ–è½¬ç›˜ (ç”Ÿæˆé¢œè‰²å’Œæ•°å­—) ===
        
        let gradientParts = []; // ç”¨äºæ„å»º conic-gradient èƒŒæ™¯å­—ç¬¦ä¸²
        const sliceAngle = 360 / totalNumbers; // æ¯ä¸ªæ‰‡åŒºçš„è§’åº¦ (12åº¦)

        for (let i = 1; i <= totalNumbers; i++) {
            // 1. ç”Ÿæˆé¢œè‰² (ä½¿ç”¨ HSL é¢œè‰²ç©ºé—´ç”Ÿæˆå½©è™¹è‰²)
            // H: è‰²ç›¸ 0-360å‡åŒ€åˆ†å¸ƒ, S: 75% é¥±å’Œåº¦, L: 55% äº®åº¦
            const hue = (i - 1) * (360 / totalNumbers); 
            const color = `hsl(${hue}, 75%, 55%)`;
            
            // æ„å»ºæ¸å˜å­—ç¬¦ä¸²éƒ¨åˆ†: color startDeg endDeg
            const startDeg = (i - 1) * sliceAngle;
            const endDeg = i * sliceAngle;
            gradientParts.push(`${color} ${startDeg}deg ${endDeg}deg`);

            // 2. åˆ›å»ºæ•°å­—å…ƒç´ 
            const numDiv = document.createElement('div');
            numDiv.className = 'number-box';
            numDiv.innerText = i;
            
            // è®¡ç®—æ•°å­—æ—‹è½¬è§’åº¦
            // æˆ‘ä»¬å¸Œæœ›æ•°å­—ä½äºæ‰‡åŒºçš„æ­£ä¸­é—´
            // æ¯”å¦‚æ•°å­—1 (0-12åº¦)ï¼Œä¸­å¿ƒæ˜¯6åº¦
            const midAngle = startDeg + (sliceAngle / 2);
            
            numDiv.style.transform = `rotate(${midAngle}deg)`;
            wheel.appendChild(numDiv);
        }

        // åº”ç”¨èƒŒæ™¯è‰²
        wheel.style.background = `conic-gradient(${gradientParts.join(', ')})`;

        
        // === 2. æ—‹è½¬é€»è¾‘ ===
        
        let currentRotation = 0;
        let isSpinning = false;
        let animationId = null;
        const spinSpeed = 25; // æ—‹è½¬é€Ÿåº¦

        // å¼€å§‹æŒ‰é’®
        startBtn.addEventListener('click', () => {
            if (isSpinning) return;
            
            isSpinning = true;
            resultDiv.innerText = "æ—‹è½¬ä¸­...";
            startBtn.disabled = true;
            stopBtn.disabled = false;
            
            rotateLoop();
        });

        // åœæ­¢æŒ‰é’®
        stopBtn.addEventListener('click', () => {
            if (!isSpinning) return;
            
            isSpinning = false;
            cancelAnimationFrame(animationId); // åœæ­¢åŠ¨ç”»
            
            calculateResult(); // è®¡ç®—ç»“æœ

            startBtn.disabled = false;
            stopBtn.disabled = true;
        });

        // åŠ¨ç”»å¾ªç¯
        function rotateLoop() {
            if (isSpinning) {
                currentRotation += spinSpeed;
                // ä¿æŒæ•°å€¼åœ¨åˆç†èŒƒå›´ï¼Œé˜²æ­¢æ•°å€¼æº¢å‡º
                if (currentRotation >= 360) {
                    currentRotation -= 360;
                }
                wheel.style.transform = `rotate(${currentRotation}deg)`;
                animationId = requestAnimationFrame(rotateLoop);
            }
        }

        // === 3. ç»“æœè®¡ç®— ===
        function calculateResult() {
            // 1. è·å–å½“å‰è½¬ç›˜ç›¸å¯¹äº0åº¦çš„æ—‹è½¬è§’åº¦ (0-360)
            // æŒ‡é’ˆåœ¨é¡¶éƒ¨ (0åº¦ä½ç½®)
            let actualDeg = currentRotation % 360;
            
            // 2. è®¡ç®—æŒ‡é’ˆæŒ‡å‘çš„è§’åº¦
            // è½¬ç›˜é¡ºæ—¶é’ˆè½¬ï¼Œç›¸å½“äºæŒ‡é’ˆé€†æ—¶é’ˆæ‰«è¿‡è½¬ç›˜
            let pointerAngle = (360 - actualDeg) % 360;
            
            // 3. è®¡ç®—è½åœ¨ç¬¬å‡ ä¸ªæ‰‡åŒº
            // Math.floor(è§’åº¦ / 12åº¦)
            // æ³¨æ„ï¼šæ•°ç»„ç´¢å¼•ä»0å¼€å§‹ (å¯¹åº”æ•°å­—1)ï¼Œæ‰€ä»¥ç»“æœè¦ +1
            let index = Math.floor(pointerAngle / sliceAngle);
            
            // æˆ‘ä»¬çš„ç”Ÿæˆé€»è¾‘æ˜¯ï¼š0-12åº¦æ˜¯æ•°å­—1 (index 0)ï¼Œ12-24åº¦æ˜¯æ•°å­—2 (index 1)...
            let finalNumber = index + 1;

            resultDiv.innerText = `ğŸ‰ ç»“æœæ˜¯ï¼š${finalNumber}`;
            resultDiv.style.color = '#e74c3c'; // ç»“æœå˜çº¢çªå‡ºæ˜¾ç¤º
        }

    </script>
</body>
</html>